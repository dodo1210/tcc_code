<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_73) on Fri May 05 15:47:16 EDT 2017 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Phasing (jProductionCritic)</title>
<meta name="date" content="2017-05-05">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Phasing (jProductionCritic)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Phasing.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../jproductioncritic/errorcheckers/NarrowbandNoise.html" title="class in jproductioncritic.errorcheckers"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../jproductioncritic/errorcheckers/StereoChannelBalance.html" title="class in jproductioncritic.errorcheckers"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?jproductioncritic/errorcheckers/Phasing.html" target="_top">Frames</a></li>
<li><a href="Phasing.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#fields.inherited.from.class.jproductioncritic.errorcheckers.ErrorChecker">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">jproductioncritic.errorcheckers</div>
<h2 title="Class Phasing" class="title">Class Phasing</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../../jproductioncritic/errorcheckers/ErrorChecker.html" title="class in jproductioncritic.errorcheckers">jproductioncritic.errorcheckers.ErrorChecker</a></li>
<li>
<ul class="inheritance">
<li>jproductioncritic.errorcheckers.Phasing</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">Phasing</span>
extends <a href="../../jproductioncritic/errorcheckers/ErrorChecker.html" title="class in jproductioncritic.errorcheckers">ErrorChecker</a></pre>
<div class="block"><p>This class is used to examine audio samples and report any technical errors that are found associated
 with phasing.</p>
 
 <p>Phasing is a problem that occurs when a signal is mixed with another signal that includes a phase 
 delayed version of itself. This can occur, for example, when two omnidirectional microphones mapped to the 
 same channel are too close to each other, or a single microphone is too close to an acoustically 
 reflective surface. This results in cancellation or reinforcement of various frequencies, depending on the
 phase offset, which can result in a muddy tone. The effect of this in the frequency domain is similar to
 that of a comb filter. Although the literature specifies several effective ways to detect phasing before 
 mixing is carried out, it is much more difficult to automatically detect afterwards, and is easily confused
 with sometimes desirable audio effects based on short delays, such as flanging.</p>
 
 <p>The algorithm used here involves first calculating the power spectrum of relatively large windows of
 sound. Each such power spectrum is then collapsed/compressed and the autocorrelation of each compressed 
 power spectrum is calculated (the compression is necessary for the sake of computational efficiency, given
 the many bins in the power spectrum resulting from the long analysis windows). Long analysis windows are
 needed to avoid false positives from held harmonic notes. Autocorrelation essentially measures the 
 self-similarity of a signal, and in particular generates peaks indicating harmonicities in the signal being 
 analyzed. Here the "signal" being analyzed is in fact a power spectrum, so the harmonicities highlighted by
 the autocorrelation indicate regular peaks or troughs in the frequency domain. A signal that has been
 processed by a comb filter (which is in essence the spectral effect of phasing) will thus have a noticeable
 autocorrelation peak. A phasing error report is thus generated if the highest peak of the normalized 
 autocorrelation of the power spectrum is beyond a user-specified threshold (the normalization is performed 
 in order to ensure balance). If there are multiple channels in the audio being examined, then each channel
 is checked separately, and an error report is generated if a problem is detected on one or multiple 
 channels. Although this approach can effectively detect phasing, it unfortunately can also produce false 
 errors due to very long held harmonic notes or to the application of audio effects like flanging. There is
 therefore significant room for improvement to this algorithm, and it is perhaps currently the weakest one 
 used by jProductionCritic.</p>
 
 <p>The user may specify the following preferences relevant to detecting this type of error in the 
 configuration file (in addition to whether or not to look for this type of error): long_window_size 
 (the number of samples that each analysis window should consist of) and 
 phasing_maximum_autocorrelation (the maximum normalized power spectrum autocorrelation value for any given
 lag that can be present in order to avoid the reporting of a phasing error).</p>
 
 <p>Extraction on a set of audio samples is performed using the checkForErrors method, which returns
 error reports indicating the problems found.</p>
 
 <p>The detection settings can be specified via the constructor of this class, and default values for these
 settings are specified in the setFieldsToDefaults and getDefaultConfigurationSettings methods for this
 class and for configuration files, respectively.</p></div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Cory McKay</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.jproductioncritic.errorcheckers.ErrorChecker">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;jproductioncritic.errorcheckers.<a href="../../jproductioncritic/errorcheckers/ErrorChecker.html" title="class in jproductioncritic.errorcheckers">ErrorChecker</a></h3>
<code><a href="../../jproductioncritic/errorcheckers/ErrorChecker.html#is_instantaneous">is_instantaneous</a>, <a href="../../jproductioncritic/errorcheckers/ErrorChecker.html#should_check_by_default">should_check_by_default</a>, <a href="../../jproductioncritic/errorcheckers/ErrorChecker.html#should_check_tag">should_check_tag</a>, <a href="../../jproductioncritic/errorcheckers/ErrorChecker.html#title">title</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../jproductioncritic/errorcheckers/Phasing.html#Phasing-jproductioncritic.ConfigurationSettings-">Phasing</a></span>(<a href="../../jproductioncritic/ConfigurationSettings.html" title="class in jproductioncritic">ConfigurationSettings</a>&nbsp;preferences)</code>
<div class="block">Instantiate an object of this class and set its fields to default values.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>java.util.ArrayList&lt;<a href="../../jproductioncritic/ErrorReport.html" title="class in jproductioncritic">ErrorReport</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../jproductioncritic/errorcheckers/Phasing.html#checkForErrors-mckay.utilities.sound.sampled.AudioSamples-">checkForErrors</a></span>(mckay.utilities.sound.sampled.AudioSamples&nbsp;audio)</code>
<div class="block">Check the given audio for the technical recording or production error associated with this class and
 return any detected errors in the form of ErrorReports.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>java.lang.String[][]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../jproductioncritic/errorcheckers/Phasing.html#getDefaultConfigurationSettings--">getDefaultConfigurationSettings</a></span>()</code>
<div class="block">Returns the configuration settings stored in this object for use in creating a default configuration
 file.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../jproductioncritic/errorcheckers/Phasing.html#validateConfigurationSettings-java.util.ArrayList-">validateConfigurationSettings</a></span>(java.util.ArrayList&lt;java.lang.String&gt;&nbsp;problems)</code>
<div class="block">Verify that the configuration settings stored in the fields of this ErrorChecker are set to permitted 
 values, and add an informative report to the given list of problems if they are invalid.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.jproductioncritic.errorcheckers.ErrorChecker">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;jproductioncritic.errorcheckers.<a href="../../jproductioncritic/errorcheckers/ErrorChecker.html" title="class in jproductioncritic.errorcheckers">ErrorChecker</a></h3>
<code><a href="../../jproductioncritic/errorcheckers/ErrorChecker.html#getErrorReportsMergedAcrossChannels-java.util.ArrayList:A-">getErrorReportsMergedAcrossChannels</a>, <a href="../../jproductioncritic/errorcheckers/ErrorChecker.html#getShouldExtractTag--">getShouldExtractTag</a>, <a href="../../jproductioncritic/errorcheckers/ErrorChecker.html#getTitle--">getTitle</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="Phasing-jproductioncritic.ConfigurationSettings-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Phasing</h4>
<pre>public&nbsp;Phasing(<a href="../../jproductioncritic/ConfigurationSettings.html" title="class in jproductioncritic">ConfigurationSettings</a>&nbsp;preferences)</pre>
<div class="block">Instantiate an object of this class and set its fields to default values. If preferences is non-null, 
 then some or all defaults are replaced by the specified values.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>preferences</code> - Execution settings indicating, among other things, whether or not this
                                                algorithm is to be applied. May be null, in which case default preferences will be
                                                used exclusively.</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getDefaultConfigurationSettings--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDefaultConfigurationSettings</h4>
<pre>public&nbsp;java.lang.String[][]&nbsp;getDefaultConfigurationSettings()</pre>
<div class="block">Returns the configuration settings stored in this object for use in creating a default configuration
 file. This includes fields of this class, as well as the the should_check_by_default field inherited
 from ErrorChecker (but not the inherited title or is_instantaneous fields).</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../jproductioncritic/errorcheckers/ErrorChecker.html#getDefaultConfigurationSettings--">getDefaultConfigurationSettings</a></code>&nbsp;in class&nbsp;<code><a href="../../jproductioncritic/errorcheckers/ErrorChecker.html" title="class in jproductioncritic.errorcheckers">ErrorChecker</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>An array of arrays where the first index corresponds to the individual setting. The second
                        index stores a given setting's configuration key in its 0th entry, and the setting's 
                        configuration value in its 1st entry. Returns null if there are no settings. Note that neither
                        keys nor values may include whitespace characters.</dd>
</dl>
</li>
</ul>
<a name="validateConfigurationSettings-java.util.ArrayList-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>validateConfigurationSettings</h4>
<pre>public&nbsp;void&nbsp;validateConfigurationSettings(java.util.ArrayList&lt;java.lang.String&gt;&nbsp;problems)</pre>
<div class="block">Verify that the configuration settings stored in the fields of this ErrorChecker are set to permitted 
 values, and add an informative report to the given list of problems if they are invalid. Do nothing if 
 the configuration settings stored in the fields are in fact valid.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../jproductioncritic/errorcheckers/ErrorChecker.html#validateConfigurationSettings-java.util.ArrayList-">validateConfigurationSettings</a></code>&nbsp;in class&nbsp;<code><a href="../../jproductioncritic/errorcheckers/ErrorChecker.html" title="class in jproductioncritic.errorcheckers">ErrorChecker</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>problems</code> - A list of configuration settings problems to add to if there are any problems with
                                        the configuration settings values stored in the fields of this ErrorChecker.</dd>
</dl>
</li>
</ul>
<a name="checkForErrors-mckay.utilities.sound.sampled.AudioSamples-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>checkForErrors</h4>
<pre>public&nbsp;java.util.ArrayList&lt;<a href="../../jproductioncritic/ErrorReport.html" title="class in jproductioncritic">ErrorReport</a>&gt;&nbsp;checkForErrors(mckay.utilities.sound.sampled.AudioSamples&nbsp;audio)
                                                throws java.lang.Exception</pre>
<div class="block">Check the given audio for the technical recording or production error associated with this class and
 return any detected errors in the form of ErrorReports.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../jproductioncritic/errorcheckers/ErrorChecker.html#checkForErrors-mckay.utilities.sound.sampled.AudioSamples-">checkForErrors</a></code>&nbsp;in class&nbsp;<code><a href="../../jproductioncritic/errorcheckers/ErrorChecker.html" title="class in jproductioncritic.errorcheckers">ErrorChecker</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>audio</code> - The low-level audio data parsed from an audio file that is to be
                                                                        checked. May not be null. It is assumed that all channels in audio
                                                                        contain an equal number of samples.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>All detected errors, sorted by start time and all of the same type. An
                                                                        empty ArrayList is returned if none are found. Will NOT be null.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - Throws an informative exception if error checking cannot be performed.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Phasing.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../jproductioncritic/errorcheckers/NarrowbandNoise.html" title="class in jproductioncritic.errorcheckers"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../jproductioncritic/errorcheckers/StereoChannelBalance.html" title="class in jproductioncritic.errorcheckers"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?jproductioncritic/errorcheckers/Phasing.html" target="_top">Frames</a></li>
<li><a href="Phasing.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#fields.inherited.from.class.jproductioncritic.errorcheckers.ErrorChecker">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
